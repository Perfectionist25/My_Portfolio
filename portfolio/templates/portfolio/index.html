{% extends "base.html" %}
{% load static %}

{% block content %}
<div style="width: 100%;" class="section">
    <div class="container">
        <div class="columns">
            {% for item in iam %}
            <div class="column is-5 m-3">
                <div style="font-size: 50px;" class="title black mt-6">{{ item.name }}</div>
                <hr class="mt-6">
                <div class="subtitle black mt-6">Python/Django, Web, Back-end Developer</div>
            </div>
            <div class="column">
                <div style="width: 100%; height: auto;" class="img"><img class="radius" src="{{ item.photo_small.url }}"></div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>

<!-- CAROUSEL -->
<div style="width: 100%;" class="section">
    <div class="container">
      <div style="width: 70%; height: 30%; margin-bottom: 12%;" id="myCarousel" class="carousel slide" data-bs-ride="carousel">
        <div style="border-radius: 30px;" class="carousel-inner">
        {% if carousel %}
          {% for item in carousel %}
          <div class="carousel-item {% if forloop.first %}active{% endif %}">
            <img src="{{ item.image.url }}" class="d-block w-100">
            <div class="carousel-caption d-none d-md-block">
                <center>
                    {% if item.title != 'No title' %}
                    <h5 style="background-color: black; width: max-content; max-height: 10vh;" class="title p-2">{{ item.title }}</h5>
                    {% endif %}
                </center>
            </div>
          </div>
          {% endfor %}
          <button class="carousel-control-prev" type="button" data-bs-target="#myCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
          </button>
          <button class="carousel-control-next" type="button" data-bs-target="#myCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
          </button>
        {% endif %}
        </div>
      </div>
    </div>
  </div>

  <br style="margin-bottom: 5vh;">

<div class="container">
    <div class="titlew">
		<h1 style="width: max-content;">MY PROJECTS</h1>
	</div>
	<div class="ghost mt-3">
		<div></div>
		<div></div>
		<div></div>
		<div></div>
		<div></div>
	</div>
</div>

<center>
    <div style="max-width: 80%;">
        <hr>
    </div>
</center>

<!-- WORK -->
<div class="section">
    <div class="container">
        <div class="columns is-centered">
            {% for item in work %}
            <div class="column is-4" style="width: max-content; margin: auto;">
                <div class="card has-text-centered p-4" style="width: 35vh; height: max-content; background-color: #1e1e1e; border-radius: 20px; box-shadow: 0 4px 20px rgba(0,0,0,0.5);">
                    <div class="img mb-3">
                        <img src="{{ item.image.url }}" alt="" style="width: 100%; height: 20vh; object-fit: cover; border-radius: 15px;">
                    </div>
                    <div class="title is-5 m-3" style="color: #ffffff;">{{ item.title }}</div>
                    <div class="subtitle is-6 m-4" style="color: #cccccc;">{{ item.description|safe|linebreaks|truncatewords:10 }}</div>
                    <p>
                        <a href="{{ item.link_project }}">
                            <button role="button" class="button-55" style="background-color: #E7E6E6; color: black; border: none; border-radius: 10px; padding: 10px 20px;">Go to project</button>
                        </a>
                        <div style="background-color: #E7E6E6; color: black; border: none;" class="button-55">
                            <a style="text-decoration: none;" href="#" class="open-modal black" data-id="{{ item.id }}">More</a>
                        </div>                  
                    </p>
                </div>
            </div>
            {% endfor %}
        </div>

        <!-- Pagination -->
        {% if page_obj.has_other_pages %}
        <nav class="pagination is-centered mt-5" role="navigation" aria-label="pagination">

            {% if page_obj.has_previous %}
            <a class="pagination-previous" href="?page={{ page_obj.previous_page_number }}" style="color: #ffffff; background-color: #333; text-decoration: none;">←</a>
            {% else %}
            <a class="pagination-previous" disabled style="background-color: #333; color: #888;">←</a>
            {% endif %}

            {% if page_obj.has_next %}
            <a class="pagination-next" href="?page={{ page_obj.next_page_number }}" style="color: #ffffff; background-color: #333; text-decoration: none;">→</a>
            {% else %}
            <a class="pagination-next" disabled style="background-color: #333; color: #888;">→</a>
            {% endif %}

            <ul class="pagination-list mr-5">
                {% for num in page_obj.paginator.page_range %}
                    {% if page_obj.number == num %}
                        <li><a class="pagination-link is-current" style="background-color: #E7E6E6; color: black; text-decoration: none;">{{ num }}</a></li>
                    {% elif num > page_obj.number|add:-3 and num < page_obj.number|add:3 %}
                        <li><a class="pagination-link" href="?page={{ num }}" style="background-color: #1e1e1e; color: #fff; text-decoration: none;">{{ num }}</a></li>
                    {% endif %}
                {% endfor %}
            </ul>
        </nav>
        {% endif %}
    </div>
</div>

<!-- MODAL WINDOW -->
<div id="modal" class="modal">
  <div class="modal-background"></div>
  <div class="modal-card">
    <header class="modal-card-head">
      <p class="modal-card-title" id="modal-title"></p>
      <button class="delete" aria-label="close"></button>
    </header>
    <section class="modal-card-body">
      <img id="modal-img" src="" alt="" style="max-width:100%; margin-bottom:1em;">
      <p style="color: whitesmoke;" id="modal-description"></p>
    </section>
  </div>
</div>
  
{% endblock %}
